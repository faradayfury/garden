<!DOCTYPE html>
<html lang="en">
  {% include head.html %}
  <body>
    <nav>{% include nav.html %}</nav>
    <div class="wrapper">
      <main>{{ content }}</main>
      <footer>{% include footer.html %}</footer>
    </div>
    
    <script>
      // Dark mode toggle functionality
      (function() {
        const themeToggle = document.getElementById('theme-toggle');
        const html = document.documentElement;
        
        // Check for saved theme preference or default to 'light'
        const currentTheme = localStorage.getItem('theme') || 'light';
        
        // Apply the current theme
        if (currentTheme === 'dark') {
          html.setAttribute('data-theme', 'dark');
        }
        
        // Toggle theme on button click
        themeToggle.addEventListener('click', function() {
          const currentTheme = html.getAttribute('data-theme');
          const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
          
          if (newTheme === 'dark') {
            html.setAttribute('data-theme', 'dark');
          } else {
            html.removeAttribute('data-theme');
          }
          
          // Save theme preference
          localStorage.setItem('theme', newTheme);
        });
      })();
      
      // Dropdown functionality
      (function() {
        const dropdown = document.querySelector('.dropdown');
        const dropdownToggle = document.querySelector('.dropdown-toggle');
        const dropdownMenu = document.querySelector('.dropdown-menu');
        
        if (dropdown && dropdownToggle && dropdownMenu) {
          // Toggle dropdown on button click
          dropdownToggle.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            dropdown.classList.toggle('open');
          });
          
          // Close dropdown when clicking outside
          document.addEventListener('click', function(e) {
            if (!dropdown.contains(e.target)) {
              dropdown.classList.remove('open');
            }
          });
          
          // Close dropdown on escape key
          document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
              dropdown.classList.remove('open');
            }
          });
        }
      })();
      
      // Smooth scroll for work link
      (function() {
        const workLink = document.querySelector('.work-link');
        
        if (workLink) {
          workLink.addEventListener('click', function(e) {
            e.preventDefault();
            
            const targetId = this.getAttribute('href').substring(1);
            const targetElement = document.getElementById(targetId);
            
            if (targetElement) {
              const elementPosition = targetElement.getBoundingClientRect().top + window.pageYOffset;
              const offset = 80; // Add 80px of space from the top
              
              window.scrollTo({
                top: elementPosition - offset,
                behavior: 'smooth'
              });
            }
          });
        }
      })();
    </script>
  </body>
</html>
